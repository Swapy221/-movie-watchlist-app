{"ast":null,"code":"\"use client\";import React,{useState}from'react';import{Link}from'react-router-dom';import{useMovie}from'../contexts/MovieContext';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Search(){const[query,setQuery]=useState('');const[results,setResults]=useState([]);const{searchMovies,addToWatchlist,watchlist}=useMovie();const{user}=useAuth();const handleSearch=async e=>{e.preventDefault();const movies=await searchMovies(query);setResults(movies);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Search Movies\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Enter movie title\",className:\"w-full px-3 py-2 border rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:results.map(movie=>{var _watchlist$user,_watchlist$user2;return/*#__PURE__*/_jsxs(\"div\",{className:\"border p-4 rounded\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.Poster,alt:movie.Title,className:\"w-full h-64 object-cover mb-2\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold\",children:movie.Title}),/*#__PURE__*/_jsx(\"p\",{children:movie.Year}),/*#__PURE__*/_jsx(Link,{to:`/movie/${movie.imdbID}`,className:\"text-blue-600 hover:underline\",children:\"View Details\"}),user&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>addToWatchlist(user,movie),disabled:(_watchlist$user=watchlist[user])===null||_watchlist$user===void 0?void 0:_watchlist$user.some(m=>m.imdbID===movie.imdbID),className:\"mt-2 bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 disabled:bg-gray-400\",children:(_watchlist$user2=watchlist[user])!==null&&_watchlist$user2!==void 0&&_watchlist$user2.some(m=>m.imdbID===movie.imdbID)?'In Watchlist':'Add to Watchlist'})]},movie.imdbID);})})]});}","map":{"version":3,"names":["React","useState","Link","useMovie","useAuth","jsx","_jsx","jsxs","_jsxs","Search","query","setQuery","results","setResults","searchMovies","addToWatchlist","watchlist","user","handleSearch","e","preventDefault","movies","children","className","onSubmit","type","value","onChange","target","placeholder","map","movie","_watchlist$user","_watchlist$user2","src","Poster","alt","Title","Year","to","imdbID","onClick","disabled","some","m"],"sources":["C:/Users/Swapy/Desktop/Git Clone/movie-watchlist-app/src/pages/Search.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useMovie } from '../contexts/MovieContext'\r\nimport { useAuth } from '../contexts/AuthContext'\r\n\r\ninterface Movie {\r\n  imdbID: string\r\n  Title: string\r\n  Year: string\r\n  Poster: string\r\n}\r\n\r\nexport default function Search() {\r\n  const [query, setQuery] = useState('')\r\n  const [results, setResults] = useState<Movie[]>([])\r\n  const { searchMovies, addToWatchlist, watchlist } = useMovie()\r\n  const { user } = useAuth()\r\n\r\n  const handleSearch = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    const movies = await searchMovies(query)\r\n    setResults(movies)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-bold mb-4\">Search Movies</h2>\r\n      <form onSubmit={handleSearch} className=\"mb-4\">\r\n        <input\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          placeholder=\"Enter movie title\"\r\n          className=\"w-full px-3 py-2 border rounded\"\r\n        />\r\n        <button type=\"submit\" className=\"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\">\r\n          Search\r\n        </button>\r\n      </form>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {results.map((movie) => (\r\n          <div key={movie.imdbID} className=\"border p-4 rounded\">\r\n            <img src={movie.Poster} alt={movie.Title} className=\"w-full h-64 object-cover mb-2\" />\r\n            <h3 className=\"font-bold\">{movie.Title}</h3>\r\n            <p>{movie.Year}</p>\r\n            <Link to={`/movie/${movie.imdbID}`} className=\"text-blue-600 hover:underline\">\r\n              View Details\r\n            </Link>\r\n            {user && (\r\n              <button\r\n                onClick={() => addToWatchlist(user, movie)}\r\n                disabled={watchlist[user]?.some((m) => m.imdbID === movie.imdbID)}\r\n                className=\"mt-2 bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700 disabled:bg-gray-400\"\r\n              >\r\n                {watchlist[user]?.some((m) => m.imdbID === movie.imdbID) ? 'In Watchlist' : 'Add to Watchlist'}\r\n              </button>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}